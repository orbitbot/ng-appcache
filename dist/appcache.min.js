!function(){"use strict";function e(e){return["$window","$rootScope","$timeout",function(n,t,a){return{restrict:"EA",compile:function(i,c){i.addClass("ng-hide"),n.applicationCache&&n.applicationCache.addEventListener(e,function(){i.removeClass("ng-hide");var e=t.$eval(c.dismissDelay);e>=0&&a(function(){i.addClass("ng-hide")},e,!0)}),angular.isUndefined(c.dismissOnClick)||i.bind("click",function(){i.addClass("ng-hide")})}}}]}var n={};["cached","checking","downloading","error","noupdate","obsolete","updateready"].map(function(t){n[t]=e(t)}),angular.module("ng-appcache",[]).factory("appcache",["$window","$rootScope","$q","$timeout",function(e,n,t){function a(){return t.reject("unsupported")}var i=this;if(e.applicationCache){i.abortUpdate=function(){try{e.applicationCache.abort()}catch(n){if(!n.message.match(/^'undefined'/))throw n}return t.when()},i.checkUpdate=function(){function a(){i.removeEventListener("updateready",c),i.removeEventListener("noupdate",r)}function c(){o.resolve(),n.$digest(),a()}function r(){o.reject(),n.$digest(),a()}var o=t.defer();i.addEventListener("updateready",c),i.addEventListener("noupdate",r);try{e.applicationCache.update()}catch(d){if("InvalidStateError"!==d.name&&"INVALID_STATE_ERR"!==d.name)throw d;o.reject(d.name)}return o.promise},i.swapCache=function(){var n=t.defer();try{e.applicationCache.swapCache(),n.resolve()}catch(a){if("InvalidStateError"!==a.name&&"INVALID_STATE_ERR"!==a.name)throw a;n.reject(a.name)}return n.promise},i.addEventListener=function(n,t,a){a=angular.isUndefined(a)?!1:a,e.applicationCache.addEventListener(n,t,a)},i.removeEventListener=function(n,t,a){a=angular.isUndefined(a)?!1:a,e.applicationCache.removeEventListener(n,t,a)},i.on=i.addEventListener,i.off=i.removeEventListener;var c={0:"UNCACHED",1:"IDLE",2:"CHECKING",3:"DOWNLOADING",4:"UPDATEREADY",5:"OBSOLETE"};i.status=c[e.applicationCache.status],n.$watch(function(){return e.applicationCache.status},function(e){i.status=c[e]}),e.applicationCache.addEventListener("error",function(){n.$digest()},!1)}else i.abortUpdate=a,i.checkUpdate=a,i.swapCache=a,i.addEventListener=function(){},i.removeEventListener=function(){},i.on=function(){},i.off=function(){};return i}]).directive("appcacheCached",n.cached).directive("appcacheChecking",n.checking).directive("appcacheDownloading",n.downloading).directive("appcacheError",n.error).directive("appcacheNoupdate",n.noupdate).directive("appcacheObsolete",n.obsolete).directive("appcacheUpdateready",n.updateready)}();